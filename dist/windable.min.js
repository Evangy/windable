!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./wind/wind");window.WindMap=d.WindMap},{"./wind/wind":9}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasRenderer=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./../renderer");c.CanvasRenderer=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),g(b,[{key:"prepare_",value:function(){return this.context.lineWidth=this.config_.particleWidth,this.context.fillStyle="rgba(0, 0, 0, "+this.config_.particleFadeOpacity+")",this}},{key:"draw_",value:function(a,b){var c=this,d=this.context.globalCompositeOperation;return this.context.globalCompositeOperation="destination-in",this.context.fillRect(b.x,b.y,b.width,b.height),this.context.globalCompositeOperation=d,a.forEach(function(a,b){a.length>0&&(c.context.beginPath(),c.context.strokeStyle=c.config_.colorScheme[b],a.forEach(function(a){c.context.moveTo(a.x,a.y),c.context.lineTo(a.xt,a.yt),a.x=a.xt,a.y=a.yt}),c.context.stroke())}),this}},{key:"clear_",value:function(){return h(Object.getPrototypeOf(b.prototype),"clear_",this).call(this),this.mapBounds_?(this.context.clearRect(0,0,this.mapBounds_.width,this.mapBounds_.height),this.context.resetTransform?this.context.resetTransform():this.context.setTransform(1,0,0,1,0,0),this):void 0}}]),b}(i.Renderer)},{"./../renderer":5}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.WebGLRenderer=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=(a("./shaders"),a("./../renderer"));c.WebGLRenderer=function(a){function b(a,c){d(this,b);var f=e(this,Object.getPrototypeOf(b).call(this,a,c));return a.addEventListener("webglcontextlost",function(a){return f.onContextLost_(a)}),a.addEventListener("webglcontextrestored",function(a){return f.onContextRestored_(a)}),f}return f(b,a),g(b,[{key:"prepare_",value:function(){return this.resize_()}},{key:"draw_",value:function(a,b){return this}},{key:"clear_",value:function(){return h(Object.getPrototypeOf(b.prototype),"clear_",this).call(this),this.mapBounds_?(this.context.clear(this.context.COLOR_BUFFER_BIT),this.resize_()):void 0}},{key:"resize_",value:function(a){return this.context.viewport(0,0,this.context.drawingBufferWidth,this.context.drawingBufferHeight),this}},{key:"onContextLost_",value:function(a){a.preventDefault(),this.stopped_=!0,this.clear_()}},{key:"onContextRestored_",value:function(a){this.clear_().start_()}}]),b}(i.Renderer)},{"./../renderer":5,"./shaders":4}],4:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.frag="   precision mediump float;   varying vec4 rgba;   void main() {     gl_FragColor = rgba;   }",c.vert="   uniform vec2 u_resolution;   attribute vec2 a_position;   attribute vec4 a_rgba;   varying vec4 rgba;   void main() {     vec2 clipspace = a_position / u_resolution * 2.0 - 1.0;     gl_Position = vec4(clipspace * vec2(1, -1), 0, 1);     rgba = a_rgba / 255.0;   }"},{}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){for(var b=null,c=["webgl","webgl-experimental","2d"],d=0;d<c.length;d++){var e=c[d];if(a.getContext(e)){b=e;break}}return b}Object.defineProperty(c,"__esModule",{value:!0}),c.Renderer=void 0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c.getContextType=e;var g=a("./../utilities/functions"),h=a("./../utilities/math"),i=a("./../utilities/palettes"),j=30,k=100,l=[NaN,NaN,null];c.Renderer=function(){function a(b,c){d(this,a),this.canvas=b,this.extent=c,this.palettes=i.palettes,this.data_=null,this.stopped_=!0,this.field_=null,this.mapBounds_=null,this.config_={colorScheme:i.palettes.Purples,particleFadeOpacity:.97,velocityScale:5e-6,particleWidth:2,particleReduction:.1};var f=e(b);if(f)this.context=b.getContext(f);else{if(b)throw new Error("Browser does not support canvas.");if(!b)throw new Error("Must provide an HTMLCanvasElement.");if(!c)throw new Error("Must provide an extent function.")}}return f(a,[{key:"start",value:function(a){var b=this.extent(),c=b.width,d=b.height,e=b.cropBounds||[[0,0],[c,d]];if(this.canvas.width=c,this.canvas.height=d,this.canvas.style.width=c+"px",this.canvas.style.height=d+"px",this.mapBounds_={south:h.math.deg2rad(b.latlng[0][1]),north:h.math.deg2rad(b.latlng[1][1]),east:h.math.deg2rad(b.latlng[1][0]),west:h.math.deg2rad(b.latlng[0][0]),width:c,height:d},this.data_=a.data||this.data_,this.mapBounds_.west-this.mapBounds_.east>0||Math.abs(this.mapBounds_.west)-Math.abs(this.mapBounds_.east)===0||!this.data_)return void(a.boundsExceededCallback&&a.boundsExceededCallback(this.mapBounds_));this.config_.colorScheme=a.colorScheme||this.config_.colorScheme,this.config_.velocityScale=a.velocityScale||this.config_.velocityScale,this.config_.particleWidth=a.particleWidth||this.config_.particleWidth,this.config_.particleFadeOpacity=a.particleFadeOpacity||this.config_.particleFadeOpacity,this.config_.particleReduction=a.particleReduction||this.config_.particleReduction;var f=this.buildGrid_(this.data_),g=this.buildBounds_(e,c,d);return this.field_=this.interpolateField_(f,g,this.mapBounds_),this.stopped_=!1,this.animate_(g,this.data_[0].data.length)}},{key:"stop",value:function(){return this.clear_(),this.stopped_=!0,this.field_&&this.field_.release(),this}},{key:"buildGrid_",value:function(a){for(var b=a[0],c=a[1],d=function(a){return[b.data[a],c.data[a]]},e=b.header.lo1,f=b.header.la1,i=b.header.dx,j=b.header.dy,k=b.header.nx,l=b.header.ny,m=[],n=Math.floor(k*i)>=360,o=0,p=0;l>p;p++){for(var q=[],r=0;k>r;r++,o++)q[r]=d(o);n&&q.push(q[0]),m[p]=q}return function(a,b){var c=h.math.floorMod(a-e,360)/i,d=(f-b)/j,k=Math.floor(c),l=k+1,n=Math.floor(d),o=n+1,p=void 0;if(p=m[n]){var q=p[k],r=p[l];if((0,g.isValue)(q)&&(0,g.isValue)(r)&&(p=m[o])){var s=p[k],t=p[l];if((0,g.isValue)(s)&&(0,g.isValue)(t))return h.math.bilinearInterpolateVector(c-k,d-n,q,r,s,t)}}return null}}},{key:"distort_",value:function(a,b,c,d,e,f){var g=f[0]*e,i=f[1]*e,j=h.math.distortion(a,b,c,d,this.mapBounds_);return f[0]=j[0]*g+j[2]*i,f[1]=j[1]*g+j[3]*i,f}},{key:"createField_",value:function(a,b){function c(b,c){var d=a[Math.round(b)];return d&&d[Math.round(c)]||l}return c.release=function(){a=[]},c.randomize=function(a){return Object.assign(a,{x:Math.round(Math.floor(Math.random()*b.width)+b.x),y:Math.round(Math.floor(Math.random()*b.height)+b.y)})},c}},{key:"buildBounds_",value:function(a,b,c){var d=a[0],e=a[1],f=Math.round(d[0]),g=Math.max(Math.floor(d[1],0),0),h=(Math.min(Math.ceil(e[0],b),b-1),Math.min(Math.ceil(e[1],c),c-1));return{x:f,y:g,xMax:b,yMax:h,width:b,height:c}}},{key:"interpolateField_",value:function(a,b){for(var c=this,d=b.height*this.config_.velocityScale,e=b.x,f=[],g=function(e){for(var g=[],i=b.y;i<=b.yMax;i+=2){var j=h.math.invert(e,i,c.mapBounds_);if(j){var k=j[0],l=j[1];if(isFinite(k)){var m=a(k,l);m&&(m=c.distort_(k,l,e,i,d,m),g[i+1]=g[i]=m)}}}f[e+1]=f[e]=g};e<b.width;)g(e),e+=2;return this.createField_(f,b)}},{key:"evolve_",value:function(a,b){var c=this;a.forEach(function(a){a.length=0}),b.forEach(function(b){b.age>k&&(c.field_.randomize(b).age=0);var d=c.field_(b.x,b.y);if(null===d[2])b.age=k;else{var e=b.x+d[0],f=b.y+d[1];null!==c.field_(e,f)[2]?(b.xt=e,b.yt=f,a[c.config_.colorScheme.indexFor(d[2])].push(b)):(b.x=e,b.y=f)}b.age+=1})}},{key:"animate_",value:function(a,b){var c=this;this.config_.colorScheme.indexFor=function(a){var b=c.config_.colorScheme.length-1;return Math.floor(Math.min(a,j)/j*b)};for(var d=this.config_.colorScheme.map(Array),e=b*this.config_.particleReduction,f=[],h=0;e>h;h++)f.push(this.field_.randomize({age:Math.floor(Math.random()*k)}));var i=0;this.prepare_();var l=function m(){try{c.stopped_||(i+=1,i>=1e3&&(i=0,c.clear_()),c.currentFrame_=(0,g.getAnimationFrame)(m),c.evolve_(d,f),c.draw_(d,a))}catch(b){console.error(b)}};l()}},{key:"clear_",value:function(){return this.currentFrame_&&cancelAnimationFrame(this.currentFrame_),this}},{key:"prepare_",value:function(){return this}},{key:"draw_",value:function(){return this}}]),a}()},{"./../utilities/functions":6,"./../utilities/math":7,"./../utilities/palettes":8}],6:[function(a,b,c){"use strict";function d(a){var b=arguments.length<=1||void 0===arguments[1]?100:arguments[1],c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=void 0;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function e(a){var b=String(a.getMonth()+1),c=String(a.getDate()),d=a.getHours();return d=String(6*Math.round(d/6)||0),1===b.length&&(b="0"+b),1===c.length&&(c="0"+c),1===d.length&&(d="0"+d),""+a.getFullYear()+b+c+d}Object.defineProperty(c,"__esModule",{value:!0}),c.debounce=d,c.formatTime=e;c.getAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,50)}}(),c.isValue=function(a){return null!==a&&void 0!==a}},{}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=2*Math.PI,e=Math.pow(10,-5.2),f=function(a,b){return a-b*Math.floor(a/b)},g=function(a){return a/180*Math.PI},h=function(a){return a/(Math.PI/180)},i=function(a,b,c,d,e,f){var g=1-a,h=1-b,i=g*h,j=a*h,k=g*b,l=a*b,m=c[0]*i+d[0]*j+e[0]*k+f[0]*l,n=c[1]*i+d[1]*j+e[1]*k+f[1]*l;return[m,n,Math.sqrt(m*m+n*n)]},j=function(a,b,c,f,g){var h=0>a?e:-e,i=0>b?e:-e,j=l(b,a+h,g),k=l(b+i,a,g),m=Math.cos(b/360*d);return[(j[0]-c)/h/m,(j[1]-f)/h/m,(k[0]-c)/i,(k[1]-f)/i]},k=function(a){return Math.log(Math.tan(a/2+Math.PI/4))},l=function(a,b,c){var d=k(c.south),e=k(c.north),f=c.width/(c.east-c.west),g=c.height/(e-d),h=k(n.deg2rad(a)),i=(n.deg2rad(b)-c.west)*f;return[i,(e-h)*g]},m=function(a,b,c){var d=c.east-c.west,e=c.width/n.rad2deg(d)*360/(2*Math.PI),f=e/2*Math.log((1+Math.sin(c.south))/(1-Math.sin(c.south))),g=c.height+f,h=(g-b)/e,i=180/Math.PI*(2*Math.atan(Math.exp(h))-Math.PI/2),j=n.rad2deg(c.west)+a/c.width*n.rad2deg(d);return[j,i]},n=c.math={deg2rad:g,bilinearInterpolateVector:i,distortion:j,floorMod:f,invert:m,rad2deg:h}},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.palettes={YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],PuRed:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],OrRed:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],Blues:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},{}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.WindMap=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./../utilities/functions"),g=a("./../renderers/renderer"),h=a("./../renderers/gl/gl"),i=a("./../renderers/canvas/canvas");c.WindMap=function(){function a(b){var c=this;d(this,a);var e=(0,g.getContextType)(b.canvas);e.indexOf("webgl")>-1?this.renderer=new h.WebGLRenderer(b.canvas,b.extent):"2d"===e&&(this.renderer=new i.CanvasRenderer(b.canvas,b.extent)),this.startRenderer_=(0,f.debounce)(function(a){c.renderer.start(a)})}return e(a,[{key:"stop",value:function(){return this.renderer.stop(),this}},{key:"start",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.startRenderer_(a),this}},{key:"update",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.stop().start(a)}}]),a}()},{"./../renderers/canvas/canvas":2,"./../renderers/gl/gl":3,"./../renderers/renderer":5,"./../utilities/functions":6}]},{},[1]);