!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./wind/wind");window.WindMap=d.WindMap},{"./wind/wind":12}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.CanvasRenderer=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function j(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:j(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./../renderer");c.CanvasRenderer=function(a){function b(){return d(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),g(b,[{key:"prepare_",value:function(){return this.context.lineWidth=this.config_.particleWidth,this.context.fillStyle="rgba(0, 0, 0, "+this.config_.particleFadeOpacity+")",this}},{key:"draw_",value:function(a,b){var c=this,d=this.context.globalCompositeOperation;return this.context.globalCompositeOperation="destination-in",this.context.fillRect(b.x,b.y,b.width,b.height),this.context.globalCompositeOperation=d,a.forEach(function(a,b){a.length>0&&(c.context.beginPath(),c.context.strokeStyle=c.config_.colorScheme[b],a.forEach(function(a){c.context.moveTo(a.x1,a.y1),c.context.lineTo(a.x2,a.y2),a.x1=a.x2,a.y1=a.y2}),c.context.stroke())}),this}},{key:"clear_",value:function(){return h(Object.getPrototypeOf(b.prototype),"clear_",this).call(this),this.mapBounds_?(this.context.clearRect(0,0,this.mapBounds_.width,this.mapBounds_.height),this.context.resetTransform?this.context.resetTransform():this.context.setTransform(1,0,0,1,0,0),this):void 0}}]),b}(i.Renderer)},{"./../renderer":8}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0}),c.WebGLRenderer=void 0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function m(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){var e=Object.getPrototypeOf(a);return null===e?void 0:m(e,b,c)}if("value"in d)return d.value;var f=d.get;if(void 0!==f)return f.call(c)},i=a("./shaders"),j=a("./helpers"),k=a("./../renderer"),l=a("./transform");c.WebGLRenderer=function(a){function b(a,c,f){d(this,b);var g=e(this,Object.getPrototypeOf(b).call(this,a,c,f));return g.gl=f,g.particlesProgram=g.constructShaders_(i.vert,i.frag),g.resolution=window.devicePixelRatio||1,g.scale=1,g.NUM_ATTRS=6,g.transform=new l.Transform,g.rectVertexPositionBuffer=g.gl.createBuffer(),g.gl.linkProgram(g.particlesProgram),g.gl.blendFuncSeparate(g.gl.SRC_ALPHA,g.gl.ONE_MINUS_SRC_ALPHA,g.gl.ONE,g.gl.ONE_MINUS_SRC_ALPHA),g.gl.enable(g.gl.BLEND),a.addEventListener("webglcontextlost",function(a){return g.onContextLost_(a)}),a.addEventListener("webglcontextrestored",function(a){return g.onContextRestored_(a)}),g}return f(b,a),g(b,[{key:"constructShaders_",value:function(a,b){var c=this,d=function(a,b){var d=c.gl.createShader(a);return c.gl.shaderSource(d,b),c.gl.compileShader(d),d},e=d(this.gl.VERTEX_SHADER,a),f=d(this.gl.FRAGMENT_SHADER,b),g=this.gl.createProgram();return this.gl.attachShader(g,e),this.gl.attachShader(g,f),g}},{key:"prepare_",value:function(){return this.clear_(),this.gl.fillStyle=[0,0,0,this.config_.particleFadeOpacity],this}},{key:"transition_",value:function(a,b){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE);var c=(0,j.initShaders)(this.gl,this.transform.c_stack+2,0);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.rectVertexPositionBuffer),this.gl.vertexAttribPointer(c.vertexPositionAttribute,4,this.gl.FLOAT,!1,0,0),this.transform.pushMatrix(),this.transform.translate(b.x,b.y),this.transform.scale(b.width,b.height);for(var d=this.transform.m_stack,e=0,f=this.transform.c_stack+1;f>e;++e)this.gl.uniformMatrix3fv(c.uTransforms[e],!1,d[f-1-e]);this.gl.uniform4f(c.uColor,this.gl.fillStyle[0],this.gl.fillStyle[1],this.gl.fillStyle[2],this.gl.fillStyle[3]),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4),this.transform.popMatrix(),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)}},{key:"draw_",value:function(a,b){var c=this.particlesProgram;this.gl.useProgram(c);var d=this.gl.createBuffer(),e=new Float32Array(this.particles_);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,d),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),this.transform.pushMatrix();for(var f=this.transform.m_stack,g=0,h=this.transform.c_stack+1;h>g;++g)this.gl.uniformMatrix3fv(c.uTransforms[g],!1,f[h-1-g]);var i=this.gl.getUniformLocation(c,"u_resolution");this.gl.uniform2f(i,this.canvas.width,this.canvas.height);var j=this.gl.getAttribLocation(c,"a_position"),k=this.gl.getAttribLocation(c,"a_rgba");this.gl.enableVertexAttribArray(j),this.gl.enableVertexAttribArray(k),this.gl.vertexAttribPointer(j,2,this.gl.FLOAT,!1,this.NUM_ATTRS*Float32Array.BYTES_PER_ELEMENT,0),this.gl.vertexAttribPointer(k,4,this.gl.FLOAT,!1,this.NUM_ATTRS*Float32Array.BYTES_PER_ELEMENT,8);var l=this.gl.getParameter(this.gl.ALIASED_LINE_WIDTH_RANGE),m=this.config_.particleWidth*Math.abs(this.scale*this.resolution),n=Math.min(Math.max(m,l[0]),l[1]);return this.gl.lineWidth(n),this.gl.drawArrays(this.gl.LINES,0,this.particles_.length/this.NUM_ATTRS),transform.popMatrix(),this}},{key:"clear_",value:function(){return h(Object.getPrototypeOf(b.prototype),"clear_",this).call(this),this.context.clear(this.context.COLOR_BUFFER_BIT),this.context.viewport(0,0,this.context.drawingBufferWidth,this.context.drawingBufferHeight),this}},{key:"onContextLost_",value:function(a){a.preventDefault(),this.stopped_=!0,this.clear_()}},{key:"onContextRestored_",value:function(a){this.clear_().start_()}}]),b}(k.Renderer)},{"./../renderer":8,"./helpers":4,"./shaders":5,"./transform":6}],4:[function(a,b,c){"use strict";function d(a){var b=arguments.length<=1||void 0===arguments[1]?1:arguments[1],c=arguments.length<=2||void 0===arguments[2]?0:arguments[2],d=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(d,e(c)),a.compileShader(d);var g=a.createShader(a.VERTEX_SHADER);a.shaderSource(g,f(a,c,b)),a.compileShader(g);var h=a.createProgram();h.stackDepth=b,a.attachShader(h,d),a.attachShader(h,g),a.linkProgram(h),a.useProgram(h),h.vertexPositionAttribute=a.getAttribLocation(h,"aVertexPosition"),a.enableVertexAttribArray(h.vertexPositionAttribute),h.uColor=a.getUniformLocation(h,"uColor"),h.uSampler=a.getUniformLocation(h,"uSampler"),h.uCropSource=a.getUniformLocation(h,"uCropSource"),h.uTransforms=[];for(var i=0;b>i;++i)h.uTransforms[i]=a.getUniformLocation(h,"uTransforms["+i+"]");return h}function e(a){return["#ifdef GL_ES","precision highp float;","#endif","#define hasTexture "+(a&g.texture?"1":"0"),"#define hasCrop "+(a&g.crop?"1":"0"),"varying vec4 vColor;","#if hasTexture","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","#if hasCrop","uniform vec4 uCropSource;","#endif","#endif","void main(void) {","#if hasTexture","#if hasCrop","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);","#else","gl_FragColor = texture2D(uSampler, vTextureCoord);","#endif","#else","gl_FragColor = vColor;","#endif","}"].join("\n")}function f(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2],d=2/a.canvas.width,e=-2/a.canvas.height;return["#define hasTexture "+(b&g.texture?"1":"0"),"attribute vec4 aVertexPosition;","#if hasTexture","varying vec2 vTextureCoord;","#endif","uniform vec4 uColor;","uniform mat3 uTransforms["+c+"];","varying vec4 vColor;","const mat4 pMatrix = mat4("+d+",0,0,0, 0,"+e+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);","mat3 crunchStack(void) {","mat3 result = uTransforms[0];","for (int i = 1; i < "+c+"; ++i) {","result = uTransforms[i] * result;","}","return result;","}","void main(void) {","vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);","vColor = uColor;","#if hasTexture","vTextureCoord = aVertexPosition.zw;","#endif","}"].join("\n")}Object.defineProperty(c,"__esModule",{value:!0}),c.initShaders=d;var g={texture:1,crop:2,path:4}},{}],5:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.frag="   precision mediump float;   varying vec4 rgba;   void main() {     gl_FragColor = rgba;   }",c.vert="   uniform vec2 u_resolution;   attribute vec2 a_position;   attribute vec4 a_rgba;   varying vec4 rgba;   void main() {     vec2 clipspace = a_position / u_resolution * 2.0 - 1.0;     gl_Position = vec4(clipspace * vec2(1, -1), 0, 1);     rgba = a_rgba / 255.0;   }"},{}],6:[function(a,b,c){"use strict";function d(a){return this.clearStack(a)}Object.defineProperty(c,"__esModule",{value:!0}),c.Transform=d;var e=16,f={identity:[1,0,0,0,1,0,0,0,1],multiply:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7],t=b[8];b[0]=l*c+o*d+r*e,b[1]=m*c+p*d+s*e,b[2]=n*c+q*d+t*e,b[3]=l*f+o*g+r*h,b[4]=m*f+p*g+s*h,b[5]=n*f+q*g+t*h,b[6]=l*i+o*j+r*k,b[7]=m*i+p*j+s*k,b[8]=n*i+q*j+t*k},vec2_multiply:function(a,b){var c=[];return c[0]=b[0]*a[0]+b[3]*a[1]+b[6],c[1]=b[1]*a[0]+b[4]*a[1]+b[7],c},transpose:function(a){return[a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]]}};d.prototype.clearStack=function(a){this.m_stack=[],this.m_cache=[],this.c_stack=0,this.valid=0,this.result=null;for(var b=0;e>b;b++)this.m_stack[b]=this.getIdentity();void 0!==a?this.m_stack[0]=a:this.setIdentity()},d.prototype.setIdentity=function(){this.m_stack[this.c_stack]=this.getIdentity(),this.valid===this.c_stack&&this.c_stack&&this.valid--},d.prototype.getIdentity=function(){return[1,0,0,0,1,0,0,0,1]},d.prototype.getResult=function(){if(!this.c_stack)return this.m_stack[0];var a=f.identity;this.valid>this.c_stack-1&&(this.valid=this.c_stack-1);for(var b=this.valid;b<this.c_stack+1;b++)a=f.multiply(this.m_stack[b],a),this.m_cache[b]=a;return this.valid=this.c_stack-1,this.result=this.m_cache[this.c_stack],this.result},d.prototype.pushMatrix=function(){this.c_stack++,this.m_stack[this.c_stack]=this.getIdentity()},d.prototype.popMatrix=function(){0!==this.c_stack&&this.c_stack--};var g=d.prototype.getIdentity();d.prototype.translate=function(a,b){g[6]=a,g[7]=b,f.multiply(g,this.m_stack[this.c_stack])};var h=d.prototype.getIdentity();d.prototype.scale=function(a,b){h[0]=a,h[4]=b,f.multiply(h,this.m_stack[this.c_stack])};var i=d.prototype.getIdentity();d.prototype.rotate=function(a){var b,c;b=Math.sin(-a),c=Math.cos(-a),i[0]=c,i[3]=b,i[1]=-b,i[4]=c,f.multiply(i,this.m_stack[this.c_stack])}},{}],7:[function(a,b,c){"use strict";function d(a){return a>0&&0===(a-1&a)}function e(a){return this.clearStack(a)}function f(a,b){this.canvas=a,this.options=b||{},this.gl=void 0,this.fs=void 0,this.vs=void 0,this.shaderProgram=void 0,this.transform=new e,this.shaderPool=[],this.maxTextureSize=void 0,a.gl2d=this,a.$getContext=a.getContext,a.getContext=function(b){return function(c){if(!b.options.force&&"webgl-2d"!==c||0===a.width||0===a.height)return b.canvas.$getContext(c);if(b.gl)return b.gl;var d=b.gl=b.canvas.$getContext("experimental-webgl");return b.initShaders(),b.initBuffers(),b.initCanvas2DAPI(),d.viewport(0,0,b.canvas.width,b.canvas.height),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT),d.colorMask(1,1,1,0),d.enable(d.BLEND),d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA),b.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE),d}}(this),this.postInit()}Object.defineProperty(c,"__esModule",{value:!0}),c.WebGL2D=f;var g={identity:[1,0,0,0,1,0,0,0,1],multiply:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7],t=b[8];b[0]=l*c+o*d+r*e,b[1]=m*c+p*d+s*e,b[2]=n*c+q*d+t*e,b[3]=l*f+o*g+r*h,b[4]=m*f+p*g+s*h,b[5]=n*f+q*g+t*h,b[6]=l*i+o*j+r*k,b[7]=m*i+p*j+s*k,b[8]=n*i+q*j+t*k},vec2_multiply:function(a,b){var c=[];return c[0]=b[0]*a[0]+b[3]*a[1]+b[6],c[1]=b[1]*a[0]+b[4]*a[1]+b[7],c},transpose:function(a){return[a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]]}},h=16;e.prototype.clearStack=function(a){this.m_stack=[],this.m_cache=[],this.c_stack=0,this.valid=0,this.result=null;for(var b=0;h>b;b++)this.m_stack[b]=this.getIdentity();void 0!==a?this.m_stack[0]=a:this.setIdentity()},e.prototype.setIdentity=function(){this.m_stack[this.c_stack]=this.getIdentity(),this.valid===this.c_stack&&this.c_stack&&this.valid--},e.prototype.getIdentity=function(){return[1,0,0,0,1,0,0,0,1]},e.prototype.getResult=function(){if(!this.c_stack)return this.m_stack[0];var a=g.identity;this.valid>this.c_stack-1&&(this.valid=this.c_stack-1);for(var b=this.valid;b<this.c_stack+1;b++)a=g.multiply(this.m_stack[b],a),this.m_cache[b]=a;return this.valid=this.c_stack-1,this.result=this.m_cache[this.c_stack],this.result},e.prototype.pushMatrix=function(){this.c_stack++,this.m_stack[this.c_stack]=this.getIdentity()},e.prototype.popMatrix=function(){0!==this.c_stack&&this.c_stack--};var i=e.prototype.getIdentity();e.prototype.translate=function(a,b){i[6]=a,i[7]=b,g.multiply(i,this.m_stack[this.c_stack])};var j=e.prototype.getIdentity();e.prototype.scale=function(a,b){j[0]=a,j[4]=b,g.multiply(j,this.m_stack[this.c_stack])};var k=e.prototype.getIdentity();e.prototype.rotate=function(a){var b,c;b=Math.sin(-a),c=Math.cos(-a),k[0]=c,k[3]=b,k[1]=-b,k[4]=c,g.multiply(k,this.m_stack[this.c_stack])},f.enable=function(a,b){return a.gl2d||new f(a,b)};var l={texture:1,crop:2,path:4};f.prototype.getFragmentShaderSource=function(a){var b=["#ifdef GL_ES","precision highp float;","#endif","#define hasTexture "+(a&l.texture?"1":"0"),"#define hasCrop "+(a&l.crop?"1":"0"),"varying vec4 vColor;","#if hasTexture","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","#if hasCrop","uniform vec4 uCropSource;","#endif","#endif","void main(void) {","#if hasTexture","#if hasCrop","gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x * uCropSource.z, vTextureCoord.y * uCropSource.w) + uCropSource.xy);","#else","gl_FragColor = texture2D(uSampler, vTextureCoord);","#endif","#else","gl_FragColor = vColor;","#endif","}"].join("\n");return b},f.prototype.getVertexShaderSource=function(a,b){var c=2/this.canvas.width,d=-2/this.canvas.height;a=a||1;var e=["#define hasTexture "+(b&l.texture?"1":"0"),"attribute vec4 aVertexPosition;","#if hasTexture","varying vec2 vTextureCoord;","#endif","uniform vec4 uColor;","uniform mat3 uTransforms["+a+"];","varying vec4 vColor;","const mat4 pMatrix = mat4("+c+",0,0,0, 0,"+d+",0,0, 0,0,1.0,1.0, -1.0,1.0,0,0);","mat3 crunchStack(void) {","mat3 result = uTransforms[0];","for (int i = 1; i < "+a+"; ++i) {","result = uTransforms[i] * result;","}","return result;","}","void main(void) {","vec3 position = crunchStack() * vec3(aVertexPosition.x, aVertexPosition.y, 1.0);","gl_Position = pMatrix * vec4(position, 1.0);","vColor = uColor;","#if hasTexture","vTextureCoord = aVertexPosition.zw;","#endif","}"].join("\n");return e},f.prototype.initShaders=function(a,b){var c=this.gl;a=a||1,b=b||0;var d=this.shaderPool[a];if(d||(d=this.shaderPool[a]=[]),d=d[b])return c.useProgram(d),this.shaderProgram=d,d;var e=this.fs=c.createShader(c.FRAGMENT_SHADER);if(c.shaderSource(this.fs,this.getFragmentShaderSource(b)),c.compileShader(this.fs),!c.getShaderParameter(this.fs,c.COMPILE_STATUS))throw"fragment shader error: "+c.getShaderInfoLog(this.fs);var f=this.vs=c.createShader(c.VERTEX_SHADER);if(c.shaderSource(this.vs,this.getVertexShaderSource(a,b)),c.compileShader(this.vs),!c.getShaderParameter(this.vs,c.COMPILE_STATUS))throw"vertex shader error: "+c.getShaderInfoLog(this.vs);var g=this.shaderProgram=c.createProgram();if(g.stackDepth=a,c.attachShader(g,e),c.attachShader(g,f),c.linkProgram(g),!c.getProgramParameter(g,c.LINK_STATUS))throw"Could not initialise shaders.";c.useProgram(g),g.vertexPositionAttribute=c.getAttribLocation(g,"aVertexPosition"),c.enableVertexAttribArray(g.vertexPositionAttribute),g.uColor=c.getUniformLocation(g,"uColor"),g.uSampler=c.getUniformLocation(g,"uSampler"),g.uCropSource=c.getUniformLocation(g,"uCropSource"),g.uTransforms=[];for(var h=0;a>h;++h)g.uTransforms[h]=c.getUniformLocation(g,"uTransforms["+h+"]");return this.shaderPool[a][b]=g,g};var m,n,o,p,q=new Float32Array([0,0,0,0,0,1,0,1,1,1,1,1,1,0,1,0]);f.prototype.initBuffers=function(){var a=this.gl;m=a.createBuffer(),n=a.createBuffer(),o=a.createBuffer(),p=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,m),a.bufferData(a.ARRAY_BUFFER,q,a.STATIC_DRAW)},f.instances=[],f.prototype.postInit=function(){f.instances.push(this)},f.prototype.initCanvas2DAPI=function(){function a(a,b,c,d){function e(a){var b;return b=1>6*a?i+(j-i)*a*6:1>2*a?j:2>3*a?i+(j-i)*(2/3-a)*6:i}var f,g,h,i,j;return a=(a%360+360)%360/360,b=b>100?1:b/100,b=0>b?0:b,c=c>100?1:c/100,c=0>c?0:c,j=.5>=c?c*(b+1):c+b-c*b,i=2*c-j,f=e(a+1/3),g=e(a),h=e(a-1/3),[f,g,h,d]}function b(c){var d,e,f,g,h,i,j=[];if(d=s.exec(c)){if(g=d[1],h=parseFloat(d[8]),g&&isNaN(h)||!g&&!isNaN(h))return!1;i=d[3];for(var k=2;8>k;k+=2){if(e=d[k],f=d[k+1],f!==i)return!1;f?(e=e>100?1:e/100,e=0>e?0:e):(e=e>255?1:e/255,e=0>e?0:e),j.push(e)}j.push(g?h:1)}else if(d=t.exec(c))g=d[1],h=parseFloat(d[5]),j=a(d[2],d[3],d[4],parseFloat(g&&h?h:1));else if(d=u.exec(c)){var l=parseInt(d[1],16);j=[((16711680&l)>>16)/255,((65280&l)>>8)/255,(255&l)/255,1]}else if(d=v.exec(c)){var m="#"+[d[1],d[1],d[2],d[2],d[3],d[3]].join("");j=b(m)}else if(c.toLowerCase()in w)j=b(w[c.toLowerCase()]);else{if("transparent"!==c.toLowerCase())return!1;j=[0,0,0,0]}return j}function c(a){return"rgba("+255*a[0]+", "+255*a[1]+", "+255*a[2]+", "+parseFloat(a[3])+")"}function e(){var a={fillStyle:[x.fillStyle[0],x.fillStyle[1],x.fillStyle[2],x.fillStyle[3]],strokeStyle:[x.strokeStyle[0],x.strokeStyle[1],x.strokeStyle[2],x.strokeStyle[3]],globalAlpha:x.globalAlpha,globalCompositeOperation:x.globalCompositeOperation,lineCap:x.lineCap,lineJoin:x.lineJoin,lineWidth:x.lineWidth,miterLimit:x.miterLimit,shadowColor:x.shadowColor,shadowBlur:x.shadowBlur,shadowOffsetX:x.shadowOffsetX,shadowOffsetY:x.shadowOffsetY,textAlign:x.textAlign,font:x.font,textBaseline:x.textBaseline};y.push(a)}function f(){y.length&&(x=y.pop())}function g(a){for(var b=n.transform.m_stack,c=0,d=n.transform.c_stack+1;d>c;++c)p.uniformMatrix3fv(a.uTransforms[c],!1,b[d-1-c])}function h(a,b){this.closed=!1,this.verts=[a,b,0,0]}function i(a){var b=n.transform,c=n.initShaders(b.c_stack+2,0),d=B[a],e=d.verts;p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,new Float32Array(e),p.STATIC_DRAW),p.vertexAttribPointer(c.vertexPositionAttribute,4,p.FLOAT,!1,0,0),b.pushMatrix(),g(c),p.uniform4f(c.uColor,x.fillStyle[0],x.fillStyle[1],x.fillStyle[2],x.fillStyle[3]),p.drawArrays(p.TRIANGLE_FAN,0,e.length/4),b.popMatrix()}function j(a){var b=n.transform,c=n.initShaders(b.c_stack+2,0),d=B[a],e=d.verts;p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,new Float32Array(e),p.STATIC_DRAW),p.vertexAttribPointer(c.vertexPositionAttribute,4,p.FLOAT,!1,0,0),b.pushMatrix(),g(c),p.uniform4f(c.uColor,x.strokeStyle[0],x.strokeStyle[1],x.strokeStyle[2],x.strokeStyle[3]),d.closed?p.drawArrays(p.LINE_LOOP,0,e.length/4):p.drawArrays(p.LINE_STRIP,0,e.length/4),b.popMatrix()}function k(a){if(this.obj=p.createTexture(),this.index=D.push(this),C.push(a),a.width>n.maxTextureSize||a.height>n.maxTextureSize){var b=document.createElement("canvas");b.width=a.width>n.maxTextureSize?n.maxTextureSize:a.width,b.height=a.height>n.maxTextureSize?n.maxTextureSize:a.height;var c=b.getContext("2d");c.drawImage(a,0,0,a.width,a.height,0,0,b.width,b.height),a=b}p.bindTexture(p.TEXTURE_2D,this.obj),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,p.RGBA,p.UNSIGNED_BYTE,a),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),d(a.width)&&d(a.height)?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR_MIPMAP_LINEAR),p.generateMipmap(p.TEXTURE_2D)):p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.bindTexture(p.TEXTURE_2D,null)}var n=this,p=this.gl,q=document.createElement("canvas");q.width=n.canvas.width,q.height=n.canvas.height;var r=q.getContext("2d"),s=/^rgb(a)?\(\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,\s*(-?[\d]+)(%)?\s*,?\s*(-?[\d\.]+)?\s*\)$/,t=/^hsl(a)?\(\s*(-?[\d\.]+)\s*,\s*(-?[\d\.]+)%\s*,\s*(-?[\d\.]+)%\s*,?\s*(-?[\d\.]+)?\s*\)$/,u=/^#([0-9A-Fa-f]{6})$/,v=/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/,w={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},x={},y=[];x.fillStyle=[0,0,0,1],Object.defineProperty(p,"fillStyle",{get:function(){return c(x.fillStyle)},set:function(a){x.fillStyle=b(a)||x.fillStyle}}),x.strokeStyle=[0,0,0,1],Object.defineProperty(p,"strokeStyle",{get:function(){return c(x.strokeStyle)},set:function(a){x.strokeStyle=b(a)||drawStyle.strokeStyle}}),p.$lineWidth=p.lineWidth,x.lineWidth=1,Object.defineProperty(p,"lineWidth",{get:function(){return x.lineWidth},set:function(a){p.$lineWidth(a),x.lineWidth=a}}),x.lineCap="butt",Object.defineProperty(p,"lineCap",{get:function(){return x.lineCap},set:function(a){x.lineCap=a}}),x.lineJoin="miter",Object.defineProperty(p,"lineJoin",{get:function(){return x.lineJoin},set:function(a){x.lineJoin=a}}),x.miterLimit=10,Object.defineProperty(p,"miterLimit",{get:function(){return x.miterLimit},set:function(a){x.miterLimit=a}}),x.shadowOffsetX=0,Object.defineProperty(p,"shadowOffsetX",{get:function(){return x.shadowOffsetX},set:function(a){x.shadowOffsetX=a}}),x.shadowOffsetY=0,Object.defineProperty(p,"shadowOffsetY",{get:function(){return x.shadowOffsetY},set:function(a){x.shadowOffsetY=a}}),x.shadowBlur=0,Object.defineProperty(p,"shadowBlur",{get:function(){return x.shadowBlur},set:function(a){x.shadowBlur=a}}),x.shadowColor="rgba(0, 0, 0, 0.0)",Object.defineProperty(p,"shadowColor",{get:function(){return x.shadowColor},set:function(a){x.shadowColor=a}}),x.font="10px sans-serif",Object.defineProperty(p,"font",{get:function(){return x.font},set:function(a){r.font=a,x.font=a}}),x.textAlign="start",Object.defineProperty(p,"textAlign",{get:function(){return x.textAlign},set:function(a){x.textAlign=a}}),x.textBaseline="alphabetic",Object.defineProperty(p,"textBaseline",{get:function(){return x.textBaseline},set:function(a){x.textBaseline=a}}),x.globalAlpha=1,Object.defineProperty(p,"globalAlpha",{get:function(){return x.globalAlpha},set:function(a){x.globalAlpha=a}}),x.globalCompositeOperation="source-over",Object.defineProperty(p,"globalCompositeOperation",{get:function(){return x.globalCompositeOperation},set:function(a){x.globalCompositeOperation=a}}),p.fillText=function(a,b,c){},p.strokeText=function(){},p.measureText=function(){return 1};var z=document.createElement("canvas"),A=z.getContext("2d");p.save=function(){n.transform.pushMatrix(),e()},p.restore=function(){n.transform.popMatrix(),f()},p.translate=function(a,b){n.transform.translate(a,b)},p.rotate=function(a){n.transform.rotate(a)},p.scale=function(a,b){n.transform.scale(a,b)},p.createImageData=function(a,b){return A.createImageData(a,b)},p.getImageData=function(a,b,c,d){var e=A.createImageData(c,d),f=new Uint8Array(c*d*4);p.readPixels(a,b,c,d,p.RGBA,p.UNSIGNED_BYTE,f);for(var g=4*c,h=d,i=0,j=h/2;j>i;++i)for(var k=0,l=g;l>k;++k){var m=i*g+k,n=(h-i-1)*g+k;e.data[m]=f[n],e.data[n]=f[m]}return e},p.putImageData=function(a,b,c){p.drawImage(a,b,c)},p.transform=function(a,b,c,d,e,f){var g=n.transform.m_stack[n.transform.c_stack];g[0]*=a,g[1]*=c,g[2]*=e,g[3]*=b,g[4]*=d,g[5]*=f,g[6]=0,g[7]=0},p.setTransform=function(a,b,c,d,e,f){n.transform.setIdentity(),p.transform.apply(this,arguments)},p.fillRect=function(a,b,c,d){var e=n.transform,f=n.initShaders(e.c_stack+2,0);p.bindBuffer(p.ARRAY_BUFFER,m),p.vertexAttribPointer(f.vertexPositionAttribute,4,p.FLOAT,!1,0,0),e.pushMatrix(),e.translate(a,b),e.scale(c,d),g(f),p.uniform4f(f.uColor,x.fillStyle[0],x.fillStyle[1],x.fillStyle[2],x.fillStyle[3]),p.drawArrays(p.TRIANGLE_FAN,0,4),e.popMatrix()},p.strokeRect=function(a,b,c,d){var e=n.transform,f=n.initShaders(e.c_stack+2,0);p.bindBuffer(p.ARRAY_BUFFER,m),p.vertexAttribPointer(f.vertexPositionAttribute,4,p.FLOAT,!1,0,0),e.pushMatrix(),e.translate(a,b),e.scale(c,d),g(f),p.uniform4f(f.uColor,x.strokeStyle[0],x.strokeStyle[1],x.strokeStyle[2],x.strokeStyle[3]),p.drawArrays(p.LINE_LOOP,0,4),e.popMatrix()},p.clearRect=function(a,b,c,d){};var B=[];p.beginPath=function(){B.length=0},p.closePath=function(){if(B.length){var a=B[B.length-1],b=a.verts[0],c=a.verts[1];a.closed=!0;var d=new h(b,c);B.push(d)}},p.moveTo=function(a,b){B.push(new h(a,b))},p.lineTo=function(a,b){B.length?B[B.length-1].verts.push(a,b,0,0):p.moveTo(a,b)},p.quadraticCurveTo=function(a,b,c,d){},p.bezierCurveTo=function(a,b,c,d,e,f){},p.arcTo=function(){},p.rect=function(a,b,c,d){p.moveTo(a,b),p.lineTo(a+c,b),p.lineTo(a+c,b+d),p.lineTo(a,b+d),p.closePath()},p.arc=function(a,b,c,d,e,f){},p.fill=function(){for(var a=0;a<B.length;a++)i(a)},p.stroke=function(){for(var a=0;a<B.length;a++)j(a)},p.clip=function(){},p.isPointInPath=function(){},p.drawFocusRing=function(){};var C=[],D=[];p.drawImage=function(a,b,c,d,e,f,h,i,j){var o=n.transform;o.pushMatrix();var q=l.texture,r=!1;3===arguments.length?(o.translate(b,c),o.scale(a.width,a.height)):5===arguments.length?(o.translate(b,c),o.scale(d,e)):9===arguments.length&&(o.translate(f,h),o.scale(i,j),q|=l.crop,r=!0);var s,t=n.initShaders(o.c_stack,q),u=C.indexOf(a);s=-1!==u?D[u]:new k(a),r&&p.uniform4f(t.uCropSource,b/a.width,c/a.height,d/a.width,e/a.height),p.bindBuffer(p.ARRAY_BUFFER,m),p.vertexAttribPointer(t.vertexPositionAttribute,4,p.FLOAT,!1,0,0),p.bindTexture(p.TEXTURE_2D,s.obj),p.activeTexture(p.TEXTURE0),p.uniform1i(t.uSampler,0),g(t),p.drawArrays(p.TRIANGLE_FAN,0,4),o.popMatrix()}}},{}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.Renderer=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./../utilities/functions"),g=a("./../utilities/math"),h=a("./../utilities/palettes"),i=30,j=100,k=[NaN,NaN,null];c.Renderer=function(){function a(b,c,e){if(d(this,a),this.canvas=b,this.extent=c,this.context=e,this.palettes=h.palettes,this.data_=null,this.stopped_=!0,this.field_=null,this.mapBounds_=null,this.particles_=[],this.rgbColorScheme_=[],this.config_={colorScheme:h.palettes.Purples,particleFadeOpacity:.97,velocityScale:5e-6,particleWidth:2,particleReduction:.1},!b)throw new Error("Must provide an HTMLCanvasElement.");if(!c)throw new Error("Must provide an extent function.");if(!e)throw new Error("Must provide a canvas context.")}return e(a,[{key:"start",value:function(a){var b=this.extent(),c=b.width,d=b.height,e=b.cropBounds||[[0,0],[c,d]];if(this.canvas.width=c,this.canvas.height=d,this.canvas.style.width=c+"px",this.canvas.style.height=d+"px",this.mapBounds_={south:g.math.deg2rad(b.latlng[0][1]),north:g.math.deg2rad(b.latlng[1][1]),east:g.math.deg2rad(b.latlng[1][0]),west:g.math.deg2rad(b.latlng[0][0]),width:c,height:d},this.data_=a.data||this.data_,this.mapBounds_.west-this.mapBounds_.east>0||Math.abs(this.mapBounds_.west)-Math.abs(this.mapBounds_.east)===0||!this.data_)return void(a.boundsExceededCallback&&a.boundsExceededCallback(this.mapBounds_));
this.config_.colorScheme=a.colorScheme||this.config_.colorScheme,this.config_.velocityScale=a.velocityScale||this.config_.velocityScale,this.config_.particleWidth=a.particleWidth||this.config_.particleWidth,this.config_.particleFadeOpacity=a.particleFadeOpacity||this.config_.particleFadeOpacity,this.config_.particleReduction=a.particleReduction||this.config_.particleReduction;var f=this.buildGrid_(this.data_),h=this.buildBounds_(e,c,d);return this.field_=this.interpolateField_(f,h,this.mapBounds_),this.stopped_=!1,this.animate_(h,this.data_[0].data.length)}},{key:"stop",value:function(){return this.clear_(),this.stopped_=!0,this.field_&&this.field_.release(),this}},{key:"buildGrid_",value:function(a){for(var b=a[0],c=a[1],d=function(a){return[b.data[a],c.data[a]]},e=b.header.lo1,h=b.header.la1,i=b.header.dx,j=b.header.dy,k=b.header.nx,l=b.header.ny,m=[],n=Math.floor(k*i)>=360,o=0,p=0;l>p;p++){for(var q=[],r=0;k>r;r++,o++)q[r]=d(o);n&&q.push(q[0]),m[p]=q}return function(a,b){var c=g.math.floorMod(a-e,360)/i,d=(h-b)/j,k=Math.floor(c),l=k+1,n=Math.floor(d),o=n+1,p=void 0;if(p=m[n]){var q=p[k],r=p[l];if((0,f.isValue)(q)&&(0,f.isValue)(r)&&(p=m[o])){var s=p[k],t=p[l];if((0,f.isValue)(s)&&(0,f.isValue)(t))return g.math.bilinearInterpolateVector(c-k,d-n,q,r,s,t)}}return null}}},{key:"distort_",value:function(a,b,c,d,e,f){var h=f[0]*e,i=f[1]*e,j=g.math.distortion(a,b,c,d,this.mapBounds_);return f[0]=j[0]*h+j[2]*i,f[1]=j[1]*h+j[3]*i,f}},{key:"createField_",value:function(a,b){function c(b,c){var d=a[Math.round(b)];return d&&d[Math.round(c)]||k}return c.release=function(){a=[]},c.randomize=function(a){return Object.assign(a,{x1:Math.round(Math.floor(Math.random()*b.width)+b.x),y1:Math.round(Math.floor(Math.random()*b.height)+b.y)})},c}},{key:"buildBounds_",value:function(a,b,c){var d=a[0],e=a[1],f=Math.round(d[0]),g=Math.max(Math.floor(d[1],0),0),h=(Math.min(Math.ceil(e[0],b),b-1),Math.min(Math.ceil(e[1],c),c-1));return{x:f,y:g,xMax:b,yMax:h,width:b,height:c}}},{key:"interpolateField_",value:function(a,b){for(var c=this,d=b.height*this.config_.velocityScale,e=b.x,f=[],h=function(e){for(var h=[],i=b.y;i<=b.yMax;i+=2){var j=g.math.invert(e,i,c.mapBounds_);if(j){var k=j[0],l=j[1];if(isFinite(k)){var m=a(k,l);m&&(m=c.distort_(k,l,e,i,d,m),h[i+1]=h[i]=m)}}}f[e+1]=f[e]=h};e<b.width;)h(e),e+=2;return this.createField_(f,b)}},{key:"evolve_",value:function(a,b){var c=this;this.particles_.length=0,a.forEach(function(a){a.length=0}),b.forEach(function(b){b.age>j&&(c.field_.randomize(b).age=0);var d=c.field_(b.x1,b.y1);if(null===d[2])b.age=j;else{var e=b.x1+d[0],f=b.y1+d[1];if(null!==c.field_(e,f)[2]){b.x2=e,b.y2=f;var g=c.config_.colorScheme.indexFor(d[2]);b.colorIndex=g,a[g].push(b),c.particles_.push(b.x1*c.resolution),c.particles_.push(b.y1*c.resolution),c.particles_.push(c.rgbColorScheme_[b.colorIndex][0]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][1]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][2]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][3]),c.particles_.push(b.x2*c.resolution),c.particles_.push(b.y2*c.resolution),c.particles_.push(c.rgbColorScheme_[b.colorIndex][0]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][1]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][2]),c.particles_.push(c.rgbColorScheme_[b.colorIndex][3])}else b.x1=e,b.y1=f}b.age+=1})}},{key:"animate_",value:function(a,b){var c=this;this.config_.colorScheme.indexFor=function(a){var b=c.config_.colorScheme.length-1;return Math.floor(Math.min(a,i)/i*b)},this.rgbColorScheme_=this.config_.colorScheme.map(function(a){a=a.replace("#","");var b=parseInt(a.substring(0,2),16),c=parseInt(a.substring(2,4),16),d=parseInt(a.substring(4,6),16);return[b,c,d,255]});for(var d=this.config_.colorScheme.map(Array),e=b*this.config_.particleReduction,g=[],h=0;e>h;h++)g.push(this.field_.randomize({age:Math.floor(Math.random()*j)}));var k=0;this.prepare_();var l=function m(){c.stopped_||(k+=1,k>=1e3&&(k=0,c.clear_()),c.currentFrame_=(0,f.getAnimationFrame)(m),c.evolve_(d,g),c.draw_(d,a))};l()}},{key:"clear_",value:function(){return this.currentFrame_&&cancelAnimationFrame(this.currentFrame_),this}},{key:"prepare_",value:function(){return this}},{key:"draw_",value:function(){return this}}]),a}()},{"./../utilities/functions":9,"./../utilities/math":10,"./../utilities/palettes":11}],9:[function(a,b,c){"use strict";function d(a){var b=arguments.length<=1||void 0===arguments[1]?100:arguments[1],c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],d=void 0;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function e(a){var b=String(a.getMonth()+1),c=String(a.getDate()),d=a.getHours();return d=String(6*Math.round(d/6)||0),1===b.length&&(b="0"+b),1===c.length&&(c="0"+c),1===d.length&&(d="0"+d),""+a.getFullYear()+b+c+d}Object.defineProperty(c,"__esModule",{value:!0}),c.debounce=d,c.formatTime=e;c.getAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,50)}}(),c.isValue=function(a){return null!==a&&void 0!==a}},{}],10:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=2*Math.PI,e=Math.pow(10,-5.2),f=function(a,b){return a-b*Math.floor(a/b)},g=function(a){return a/180*Math.PI},h=function(a){return a/(Math.PI/180)},i=function(a,b,c,d,e,f){var g=1-a,h=1-b,i=g*h,j=a*h,k=g*b,l=a*b,m=c[0]*i+d[0]*j+e[0]*k+f[0]*l,n=c[1]*i+d[1]*j+e[1]*k+f[1]*l;return[m,n,Math.sqrt(m*m+n*n)]},j=function(a,b,c,f,g){var h=0>a?e:-e,i=0>b?e:-e,j=l(b,a+h,g),k=l(b+i,a,g),m=Math.cos(b/360*d);return[(j[0]-c)/h/m,(j[1]-f)/h/m,(k[0]-c)/i,(k[1]-f)/i]},k=function(a){return Math.log(Math.tan(a/2+Math.PI/4))},l=function(a,b,c){var d=k(c.south),e=k(c.north),f=c.width/(c.east-c.west),g=c.height/(e-d),h=k(n.deg2rad(a)),i=(n.deg2rad(b)-c.west)*f;return[i,(e-h)*g]},m=function(a,b,c){var d=c.east-c.west,e=c.width/n.rad2deg(d)*360/(2*Math.PI),f=e/2*Math.log((1+Math.sin(c.south))/(1-Math.sin(c.south))),g=c.height+f,h=(g-b)/e,i=180/Math.PI*(2*Math.atan(Math.exp(h))-Math.PI/2),j=n.rad2deg(c.west)+a/c.width*n.rad2deg(d);return[j,i]},n=c.math={deg2rad:g,bilinearInterpolateVector:i,distortion:j,floorMod:f,invert:m,rad2deg:h}},{}],11:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});c.palettes={YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],PuRed:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],OrRed:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],Blues:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]}},{}],12:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.WindMap=void 0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./../renderers/canvas/canvas"),g=a("./../utilities/functions"),h=a("./../renderers/gl/gl");a("./../renderers/gl/webgl2d"),c.WindMap=function(){function a(b){function c(){for(var a=["webgl-2d","webgl","webgl-experimental","2d"],c=0;c<a.length;c++){var d=a[c];if(b.canvas.getContext(d))return d}}var e=this;d(this,a);var i=b.contextType||c(),j=b.canvas.getContext(i);i.indexOf("2d")>-1?this.renderer=new f.CanvasRenderer(b.canvas,b.extent,j):i.indexOf("webgl")>-1&&(this.renderer=new h.WebGLRenderer(b.canvas,b.extent,j)),this.startRenderer_=(0,g.debounce)(function(a){e.renderer.start(a)})}return e(a,[{key:"stop",value:function(){return this.renderer.stop(),this}},{key:"start",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.startRenderer_(a),this}},{key:"update",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return this.stop().start(a)}}]),a}()},{"./../renderers/canvas/canvas":2,"./../renderers/gl/gl":3,"./../renderers/gl/webgl2d":7,"./../utilities/functions":9}]},{},[1]);